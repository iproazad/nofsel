<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تومەتبار - تسجيل المتهمين</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
  <meta name="theme-color" content="#4CAF50">
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
  <header>
    <div class="container">
      <h1>تومەتبار</h1>
      <p>تسجيل بيانات المتهمين</p>
    </div>
  </header>

  <nav class="nav">
    <a href="index.html"><i class="fas fa-home"></i> الرئيسية</a>
    <a href="tomary-areshe.html"><i class="fas fa-clipboard-list"></i> توماری ئاريشە</a>
  </nav>

  <main class="container">
    <form id="multi-tomatbar-form" class="form-container">
      <!-- Person Cards Container -->
      <h2 class="mb-2">بيانات المتهمين</h2>
      <div id="person-cards-container">
        <!-- First Person Card (will be added dynamically) -->
      </div>
      
      <div class="text-center mb-3">
        <button type="button" id="add-person-button" class="btn btn-secondary">
          <i class="fas fa-user-plus"></i> إضافة متهم
        </button>
      </div>
      
      <!-- Issue Details -->
      <h2 class="mb-2">تفاصيل البلاغ</h2>
      <div class="form-container">
        <div class="d-flex flex-wrap">
          <div class="form-group" style="flex: 1 0 50%; padding: 0 5px;">
            <label for="issue-type">نوع المشكلة:</label>
            <input type="text" id="issue-type" name="issue-type" class="form-control" list="issue-type-options" required />
            <datalist id="issue-type-options"></datalist>
          </div>
          
          <div class="form-group" style="flex: 1 0 50%; padding: 0 5px;">
            <label for="problem-location">مكان المشكلة:</label>
            <input type="text" id="problem-location" name="problem-location" class="form-control" required />
          </div>
          
          <div class="form-group" style="flex: 1 0 33%; padding: 0 5px;">
            <label for="time-from">الوقت من:</label>
            <input type="time" id="time-from" name="time-from" class="form-control" />
          </div>
          
          <div class="form-group" style="flex: 1 0 33%; padding: 0 5px;">
            <label for="time-to">الوقت إلى:</label>
            <input type="time" id="time-to" name="time-to" class="form-control" />
          </div>
          
          <div class="form-group" style="flex: 1 0 33%; padding: 0 5px;">
            <label for="period">الفترة:</label>
            <input type="text" id="period" name="period" class="form-control" list="period-list" />
            <datalist id="period-list"></datalist>
          </div>
          
          <div class="form-group" style="flex: 1 0 50%; padding: 0 5px;">
            <label for="driver-name">اسم السائق:</label>
            <input type="text" id="driver-name" name="driver-name" class="form-control" list="driver-list" />
            <datalist id="driver-list"></datalist>
          </div>
          
          <div class="form-group" style="flex: 1 0 50%; padding: 0 5px;">
            <label for="point">النقطة:</label>
            <input type="text" id="point" name="point" class="form-control" list="point-list" />
            <datalist id="point-list"></datalist>
          </div>
          
          <div class="form-group" style="flex: 1 0 100%; padding: 0 5px;">
            <label for="sent-to">تمت الإحالة إلى:</label>
            <input type="text" id="sent-to" name="sent-to" class="form-control" list="sent-to-list" />
            <datalist id="sent-to-list"></datalist>
          </div>
          
          <div class="form-group" style="flex: 1 0 100%; padding: 0 5px;">
            <label for="notes">ملاحظات:</label>
            <textarea id="notes" name="notes" class="form-control" rows="3"></textarea>
          </div>
        </div>
      </div>
      
      <!-- Form Actions -->
      <div class="d-flex justify-between mt-3">
        <button type="submit" class="btn btn-primary" style="flex: 1; margin: 0 5px;">
          <i class="fas fa-save"></i> حفظ السجل
        </button>
        <button type="button" id="new-entry" class="btn btn-secondary" style="flex: 1; margin: 0 5px;">
          <i class="fas fa-file"></i> تسجيل جديد
        </button>
        <button type="button" id="share-whatsapp" class="btn btn-success" style="flex: 1; margin: 0 5px;">
          <i class="fab fa-whatsapp"></i> مشاركة واتساب
        </button>
        <button type="button" id="show-records-button" class="btn btn-warning" style="flex: 1; margin: 0 5px;">
          <i class="fas fa-list"></i> عرض السجلات
        </button>
      </div>
    </form>
  </main>

  <!-- Records Modal -->
  <div id="records-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h2>السجلات المحفوظة</h2>
      
      <div class="search-container">
        <input type="text" id="search-input" class="search-input" placeholder="بحث في السجلات..." />
      </div>
      
      <div id="records-list-container"></div>
    </div>
  </div>

  <!-- View Record Modal -->
  <div id="view-record-modal" class="modal">
    <div class="modal-content">
      <span class="close-modal">&times;</span>
      <h2>تفاصيل السجل</h2>
      
      <div id="record-card" class="record-card"></div>
      
      <div class="d-flex justify-between mt-3">
        <button type="button" id="save-record-card" class="btn btn-primary" style="flex: 1; margin: 0 5px;">
          <i class="fas fa-download"></i> تنزيل كصورة
        </button>
        <button type="button" id="share-record-whatsapp" class="btn btn-success" style="flex: 1; margin: 0 5px;">
          <i class="fab fa-whatsapp"></i> مشاركة واتساب
        </button>
        <button type="button" id="delete-record" class="btn btn-danger" style="flex: 1; margin: 0 5px;">
          <i class="fas fa-trash"></i> حذف السجل
        </button>
      </div>
    </div>
  </div>

  <!-- Datalists for additional fields -->
  <datalist id="marital-status-options"></datalist>
  <datalist id="imprisonment-options"></datalist>

  <footer class="text-center mt-4">
    <div class="container">
      <p>&copy; 2024 تطبيق تسجيل المتهم والمشاكل</p>
    </div>
  </footer>

  <script src="js/app.js"></script>
  <script src="js/multi-tomatbar.js"></script>
</body>
</html>